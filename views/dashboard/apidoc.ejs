<div class="page-heading d-flex flex-wrap justify-content-between align-items-center gap-3 mb-4">
	<div class="animate-fade-in">
		<h3 class="mb-1 fw-bold">API Documentation</h3>
		<p class="text-muted mb-0">Integrate WhatsApp Gateway with your external systems.</p>
	</div>
	<div class="animate-fade-in" style="animation-delay: 0.1s;">
		<a href="https://documenter.getpostman.com/view/16528402/VVXC3EjU" target="_blank" class="btn btn-primary">
			<i class="fa-solid fa-up-right-from-square me-2"></i>Postman Collection
		</a>
	</div>
</div>

<div class="page-content">
	<!-- Hero Info -->
	<div class="message-hero animate-fade-in" style="animation-delay: 0.2s;">
		<div class="d-flex flex-wrap justify-content-between align-items-start gap-4">
			<div style="z-index: 1; max-width: 700px;">
				<span class="badge mb-3 text-uppercase tracking-wider"><i
						class="fa-solid fa-network-wired me-2"></i>REST API</span>
				<h2 class="fw-bold mb-3">Developer Resources</h2>
				<p class="mb-4 opacity-90">
					All requests must be made over HTTPS (if public) and include the appropriate authentication headers.
					The API is hosted on the same instance as this dashboard.
				</p>
				<div class="d-flex flex-wrap gap-3">
					<div class="metric-pill bg-white text-dark border-0">
						<i class="fa-solid fa-server text-primary"></i>
						Base URL: <code
							class="ms-2 text-primary fw-bold"><%= process.env.HOST || 'http://localhost:8080' %></code>
					</div>
					<div class="metric-pill bg-white text-dark border-0">
						<i class="fa-solid fa-key text-primary"></i>
						Default Session: <code
							class="ms-2 text-primary fw-bold"><%= process.env.N8N_SESSION_NAME || process.env.SESSION_NAME %></code>
					</div>
				</div>
			</div>
		</div>
	</div>

	<section class="row g-4 animate-fade-in" style="animation-delay: 0.3s;">
		<!-- Send Text -->
		<div class="col-lg-6 col-12">
			<div class="card glass-card h-100">
				<div class="card-header border-0 d-flex justify-content-between align-items-center">
					<h5 class="mb-0">Send Text Message</h5>
					<span class="badge bg-success-subtle text-success border border-success-subtle">POST</span>
				</div>
				<div class="card-body pt-0">
					<p class="text-muted small mb-3">Simple endpoint for sending text messages. Compatible with Fonnte.
					</p>

					<div class="bg-light p-3 rounded-3 mb-3 border">
						<div class="d-flex gap-2 mb-2">
							<span class="badge bg-dark">URL</span>
							<code class="text-dark">/api/send</code>
						</div>
						<div class="d-flex gap-2">
							<span class="badge bg-secondary">AUTH</span>
							<code class="text-dark">Authorization: &lt;API_SEND_TOKEN&gt;</code>
						</div>
					</div>

					<h6 class="small fw-bold text-muted mb-2">BODY (JSON)</h6>
					<pre class="bg-dark text-light p-3 rounded-3 small mb-3"><code>{
  "target": "6281234567890",
  "message": "Hello World!",
  "sessions": "session_1",   // optional
  "type": "text"
}</code></pre>

					<h6 class="small fw-bold text-muted mb-2">RESPONSE (200)</h6>
					<pre class="bg-light text-dark p-3 rounded-3 small border mb-0"><code>{
  "status": 200,
  "message": "Success Send Message to 6281234567890!"
}</code></pre>
				</div>
			</div>
		</div>

		<!-- n8n -->
		<div class="col-lg-6 col-12">
			<div class="card glass-card h-100">
				<div class="card-header border-0 d-flex justify-content-between align-items-center">
					<h5 class="mb-0">n8n Integration</h5>
					<span class="badge bg-success-subtle text-success border border-success-subtle">POST</span>
				</div>
				<div class="card-body pt-0">
					<p class="text-muted small mb-3">Dedicated endpoint for n8n workflows.</p>

					<div class="bg-light p-3 rounded-3 mb-3 border">
						<div class="d-flex gap-2 mb-2">
							<span class="badge bg-dark">URL</span>
							<code class="text-dark">/n8n/send</code>
						</div>
						<div class="d-flex gap-2">
							<span class="badge bg-secondary">AUTH</span>
							<code class="text-dark">Authorization: &lt;N8N_API_TOKEN&gt;</code>
						</div>
					</div>

					<h6 class="small fw-bold text-muted mb-2">BODY (JSON)</h6>
					<pre class="bg-dark text-light p-3 rounded-3 small mb-3"><code>{
  "target": "6281234567890",
  "message": "Message from n8n workflow"
}</code></pre>
					<p class="small text-muted mb-0">
						<i class="fa-solid fa-circle-info me-1"></i>
						Uses <code>N8N_SESSION_NAME</code> env var if <code>sessions</code> field is omitted.
					</p>
				</div>
			</div>
		</div>

		<!-- Webhook -->
		<div class="col-lg-6 col-12">
			<div class="card glass-card h-100">
				<div class="card-header border-0 d-flex justify-content-between align-items-center">
					<h5 class="mb-0">Inbound Webhook</h5>
					<span class="badge bg-warning-subtle text-warning border border-warning-subtle">EVENT</span>
				</div>
				<div class="card-body pt-0">
					<p class="text-muted small mb-3">Data sent to your configured Callback URL when a message is
						received.</p>

					<h6 class="small fw-bold text-muted mb-2">PAYLOAD EXAMPLE</h6>
					<pre class="bg-dark text-light p-3 rounded-3 small mb-3"><code>{
  "session": "session_1",
  "sender": "6281234567890",
  "from": "6281234567890@s.whatsapp.net",
  "type": "text",
  "message": "Hello Bot",
  "url": null,
  "timestamp": 1731904800
}</code></pre>
					<p class="small text-muted mb-0">
						Configure the Callback URL in the Dashboard or via API.
						Optional <code>x-api-key</code> header included if configured.
					</p>
				</div>
			</div>
		</div>

		<!-- Callback Management -->
		<div class="col-lg-6 col-12">
			<div class="card glass-card h-100">
				<div class="card-header border-0 d-flex justify-content-between align-items-center">
					<h5 class="mb-0">Manage Callbacks</h5>
					<div class="d-flex gap-1">
						<span class="badge bg-primary-subtle text-primary border border-primary-subtle">GET</span>
						<span class="badge bg-success-subtle text-success border border-success-subtle">POST</span>
						<span class="badge bg-danger-subtle text-danger border border-danger-subtle">DEL</span>
					</div>
				</div>
				<div class="card-body pt-0">
					<p class="text-muted small mb-3">Programmatically manage webhook callbacks.</p>

					<ul class="list-group list-group-flush rounded-3 border">
						<li class="list-group-item bg-light">
							<div class="d-flex align-items-center gap-2 mb-1">
								<span class="badge bg-primary">GET</span>
								<code class="text-dark fw-bold">/api/callback</code>
							</div>
							<small class="text-muted">List all callbacks. Query <code>?session_name=x</code> for
								specific.</small>
						</li>
						<li class="list-group-item bg-light">
							<div class="d-flex align-items-center gap-2 mb-1">
								<span class="badge bg-success">POST</span>
								<code class="text-dark fw-bold">/api/callback</code>
							</div>
							<small class="text-muted">Body:
								<code>{ "session_name": "...", "callback_url": "..." }</code></small>
						</li>
						<li class="list-group-item bg-light">
							<div class="d-flex align-items-center gap-2 mb-1">
								<span class="badge bg-danger">DEL</span>
								<code class="text-dark fw-bold">/api/callback/:session_name</code>
							</div>
							<small class="text-muted">Remove callback for a session.</small>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</section>
</div>

<footer class="mt-5 mb-4">
	<div class="text-center">
		<p class="mb-0 small text-muted">WhatsApp Gateway Console &copy; <%= new Date().getFullYear() %>
		</p>
	</div>
</footer>